<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for app/notifications/notification.service.ts</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="../../prettify.css" />
    <link rel="stylesheet" href="../../base.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style type='text/css'>
        .coverage-summary .sorter {
            background-image: url(../../sort-arrow-sprite.png);
        }
    </style>
</head>
<body>
<div class='wrapper'>
  <div class='pad1'>
    <h1>
      <a href="../../index.html">all files</a> / <a href="index.html">app/notifications/</a> notification.service.ts
    </h1>
    <div class='clearfix'>
      <div class='fl pad1y space-right2'>
        <span class="strong">59.46% </span>
        <span class="quiet">Statements</span>
        <span class='fraction'>22/37</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">0% </span>
        <span class="quiet">Branches</span>
        <span class='fraction'>0/10</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">28.57% </span>
        <span class="quiet">Functions</span>
        <span class='fraction'>2/7</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">57.14% </span>
        <span class="quiet">Lines</span>
        <span class='fraction'>20/35</span>
      </div>
    </div>
  </div>
  <div class='status-line medium'></div>
<pre><table class="coverage">
<tr><td class="line-count quiet">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133</td><td class="line-coverage quiet"><span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">import { Injectable } from '@angular/core';
import { IErrorResult } from '../search/result';
&nbsp;
/**
 * Interface to describe a notification that can be displayed.
 */
export interface SacGwhNotification {
  /** OPTIONAL ID of the notification. Only the last notification per ID will be shown. If there is a notification
   * with a given ID already, the old one will be dismissed an be replaced with the new. */
  id?: number;
&nbsp;
  /** type of the notification.
   *  Provides one of four bootstrap supported contextual classes:
   *  `success` -&gt; green, `info` -&gt; blue, `warning` -&gt; orange and `danger` -&gt; red
   */
  type: string;
&nbsp;
  /** string containing the message to be displayed. The message may contain HTML */
  message: string;
&nbsp;
  /** OPTIONAL string that contains further information. Will be displayed in &lt;PRE&gt; */
  details?: string;
&nbsp;
  /** OPTIONAL milliseconds the notification will be dismissed after. If not given, a default will apply */
  dismissAfter?: number;
}
&nbsp;
/**
 * Service to handle notifications to the user.
 */
@Injectable()
export class NotificationService {
&nbsp;
  /** Message ID for 'copied to clipboard' message */
  public static MSG_ID_URL_COPIED_TO_CLIPBOARD = 1;
&nbsp;
  /** Message ID for 'show more results' message */
  public static MSG_ID_SHOW_ALL_RESULTS = 2;
&nbsp;
  /** Message ID for error messages */
  public static MSG_ID_ERROR = 3;
&nbsp;
  /** Message that was created by login/register mask */
  public static MSG_ID_LOGIN_STUFF = 4;
&nbsp;
  /** Message that was created by file uploader */
  public static MSG_ID_FILE_UPLOADER = 5;
&nbsp;
  /** Message that shows the "document not found" when using "showModal" for example on search results. */
  public static MSG_ID_DOCUMENT_NOT_FOUND = 6;
&nbsp;
  /** default dismiss time in milliseconds */
  public static DEFAULT_DISMISS = 5000;
&nbsp;
  /** constant to indicate that the notification should not be automatically dismissed after some time */
  public static DISMISS_NEVER = -1;
&nbsp;
  /** constant for notification type to indicate a successful operation */
  public static NOTIFICATION_TYPE_SUCCESS = 'success';
&nbsp;
  /** constant for notification type to show a information message */
  public static NOTIFICATION_TYPE_INFO = 'info';
&nbsp;
  /** constant for notification type to show a warning */
  public static NOTIFICATION_TYPE_WARNING = 'warning';
&nbsp;
  /** constant for notification type to show an error */
  public static NOTIFICATION_TYPE_DANGER = 'danger';
&nbsp;
&nbsp;
  /** array storing all displayed notifications */
  notifications: SacGwhNotification[] = [];
&nbsp;
  /** Creates an error notification out of an IErrorResult and displays it. This notification will not be closed
   * after DEFAULT_DISMISS.
   *
   * @param errorResponse error response received from a AJAX call for example.
   */
  public addErrorResultNotification( errorResponse: IErrorResult<span class="fstat-no" title="function not covered" > ) {</span>
<span class="cstat-no" title="statement not covered" >    this.addNotification({</span>
      id: NotificationService.MSG_ID_ERROR,
      type: 'danger',
      message: errorResponse.message, details: errorResponse.details,
      dismissAfter: NotificationService.DISMISS_NEVER
    });
  }
&nbsp;
  /** Adds a notification and displays it.
   * @param notification Notification description.
   */
  public addNotification( notification: SacGwhNotification<span class="fstat-no" title="function not covered" > ) {</span>
<span class="cstat-no" title="statement not covered" >    if (notification.id) {</span>
      let i = <span class="cstat-no" title="statement not covered" >this.notifications.findIndex(</span>
        arrayNotification<span class="fstat-no" title="function not covered" > =&gt; <span class="cstat-no" title="statement not covered" >arrayNotification.id === notification.id)</span></span>;
<span class="cstat-no" title="statement not covered" >      if (i &gt; -1) {</span>
<span class="cstat-no" title="statement not covered" >        this.dismissNotification(i);</span>
      }
    }
&nbsp;
<span class="cstat-no" title="statement not covered" >    switch (notification.dismissAfter) {</span>
      case undefined:
<span class="cstat-no" title="statement not covered" >        notification.dismissAfter = NotificationService.DEFAULT_DISMISS;</span>
<span class="cstat-no" title="statement not covered" >        break;</span>
&nbsp;
      case NotificationService.DISMISS_NEVER:
<span class="cstat-no" title="statement not covered" >        notification.dismissAfter = undefined;</span>
<span class="cstat-no" title="statement not covered" >        break;</span>
&nbsp;
    }
&nbsp;
<span class="cstat-no" title="statement not covered" >    this.notifications.push(notification);</span>
  }
&nbsp;
  /**
   * Dismisses the notification with the given index.
   * @param i index of the notification to dismiss
   */
  dismissNotification( i: number<span class="fstat-no" title="function not covered" > ) {</span>
    // console.log(`dismissNotification(${i})`);
<span class="cstat-no" title="statement not covered" >    if (i &gt;= 0 &amp;&amp; i &lt; this.notifications.length) {</span>
<span class="cstat-no" title="statement not covered" >      this.notifications.splice(i, 1);</span>
    }
  }
&nbsp;
  /**
   * Returns all notifications that are currently displayed.
   * @returns {SacGwhNotification[]}
   */
<span class="fstat-no" title="function not covered" >  getNotifications(): SacGwhNotification[] {</span>
<span class="cstat-no" title="statement not covered" >    return this.notifications;</span>
  }
}
&nbsp;</pre></td></tr>
</table></pre>
<div class='push'></div><!-- for sticky footer -->
</div><!-- /wrapper -->
<div class='footer quiet pad2 space-top1 center small'>
  Code coverage
  generated by <a href="http://istanbul-js.org/" target="_blank">istanbul</a> at Thu Sep 28 2017 13:28:39 GMT+0000 (UTC)
</div>
</div>
<script src="../../prettify.js"></script>
<script>
window.onload = function () {
        if (typeof prettyPrint === 'function') {
            prettyPrint();
        }
};
</script>
<script src="../../sorter.js"></script>
</body>
</html>
