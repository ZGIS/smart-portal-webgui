<div bsModal #passwordUpdateModalRef="bs-modal" class="modal fade" tabindex="-1" role="article"
     aria-labelledby="password-change" aria-hidden="true">
  <div class="modal-dialog modal-sm">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close pull-right" (click)="hideUpdateModal()" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
        <h4 class="modal-title pull-left">Change password</h4>
      </div>
      <div class="modal-body">

        <div class="panel panel-default">
          <div class="panel-heading">Please enter your current password, a new password and confirm the new password
            again!
          </div>
          <div class="panel-body">

            <form name="form" (ngSubmit)="f.form.valid && oldPassIsNotNewPass && passwordsAreSync && onSubmit()"
                  #f="ngForm" (keyup)="validatePasswordSync($event)" novalidate>
              <div class="form-group" [ngClass]="{ 'has-error': f.submitted && !passwordCurrent.valid }">
                <label for="passwordCurrent">Your current password</label>
                <input id="passwordCurrent" type="password" class="form-control" name="passwordCurrent"
                       [(ngModel)]="model.passwordCurrent" #passwordCurrent="ngModel"
                       required minlength="8"/>
                <div *ngIf="f.submitted && !passwordCurrent.valid" class="help-block">Current password is required</div>
              </div>

              <div class="form-group" [ngClass]="{ 'has-error': f.submitted && !password.valid }">
                <label for="password">New password</label>
                <input id="password" type="password" class="form-control" name="password" [(ngModel)]="model.password"
                       #password="ngModel"
                       required minlength="8"/>
                <div *ngIf="f.submitted && !password.valid" class="help-block">New password is required</div>
                <div *ngIf="f.submitted && !oldPassIsNotNewPass" class="help-block">New password must not be identical
                  with current password!
                </div>
              </div>
              <div class="form-group" [ngClass]="{ 'has-error': f.submitted && !passwordConfirm.valid }">
                <label for="passwordConfirm">Confirm new password</label>
                <input id="passwordConfirm" type="password" class="form-control" name="passwordConfirm"
                       [(ngModel)]="model.passwordConfirm" #passwordConfirm="ngModel"
                       required minlength="8"/>
                <div *ngIf="f.submitted && !passwordConfirm.valid" class="help-block">New password is required</div>
                <div *ngIf="f.submitted && !passwordsAreSync" class="help-block">New passwords are not identical!</div>
              </div>
              <div class="form-group">
                <button [disabled]="loading" class="btn btn-primary">Submit password change</button>
                <img *ngIf="loading"
                     src="data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA=="/>
              </div>
              <div class="form-group">
                <label for="abort">Back to account</label><br>
                <button type="button" class="btn btn-info" (click)="hideUpdateModal()" id="abort"
                        aria-label="close">Cancel
                </button>
              </div>
              <div *ngIf="error" class="alert alert-danger">{{ error }}</div>
            </form>
          </div>
        </div>
      </div>
    </div>

  </div>
</div>
