<div class="row">
  <app-sac-gwh-central-usernav></app-sac-gwh-central-usernav>
</div>
<div class="row">
  <div class="col-md-4 col-sm-5">
    <div class="panel panel-default">
      <div class="panel-heading">
        <a (click)="reloadGroups()" tooltip="Refresh groups">
          <i class="fa fa-repeat" aria-hidden="true"></i> Manage</a> your groups and rights
      </div>
      <div class="panel-body">
        <div class="list-group">
          <div class="list-group-item">
            <a role="button" class="btn btn-info" (click)="showCreateGroupModal()" tooltip="Create a new group, e.g. a working group, project team or organisation">Create new group
              <i class="fa fa-plus-circle" aria-hidden="true"></i>
            </a>
          </div>
          <div class="list-group-item" *ngIf="userGroups.length <= 0">No groups have been created.</div>
          <div class="list-group-item" *ngFor="let usergroup of userGroups">
            {{ usergroup.name }}
            <button type="button" class="btn btn-warning" tooltip="Edit group properties.">Edit group.
            </button>
            <ul>
              <li *ngIf="usergroup.shortinfo">{{ usergroup.shortinfo }}</li>
              <li>user members: {{ usergroup?.hasUsersLevel.length }}</li>
              <li>shared collections: {{ usergroup?.hasOwcContextsVisibility.length }}</li>
            </ul>
          </div>
        </div>
      </div>
      <div class="panel-footer">
        {{ userGroups.length }} user group{{ userGroups.length !== 1 ? 's' : '' }}
      </div>
    </div>
  </div>
</div>

<div bsModal #createGroupModalRef="bs-modal" class="modal fade" tabindex="-1" role="article"
     aria-labelledby="about" aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close pull-right" (click)="hideCreateGroupModal()" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
        <h4 class="modal-title pull-left">Create a new group</h4>
      </div>
      <div class="modal-body">
        <div class="panel panel-default">
          <div class="panel-body">
            <h3>Create a new group</h3>
            <form name="form" (ngSubmit)="f.form.valid && createGroup(newgroup.title, newgroup.subtitle)" #f="ngForm" novalidate>

              <div class="form-group" [ngClass]="{ 'has-error': f.submitted && !title.valid }">
                <label for="title" tooltip="The title of the new collection" placement="right">Title <small>(the title of the new group)</small></label>
                <input type="text" class="form-control" name="title" id="title"
                       #title="ngModel" [(ngModel)]="newgroup.title"
                       required />
                <div *ngIf="f.submitted && !title.valid" class="help-block">a title is required</div>
              </div>
              <div class="form-group" [ngClass]="{ 'has-error': f.submitted && !subtitle.valid }">
                <label tooltip="The abstract of the new collection" for="subtitle">Abstract/subtitle <small>(a short abstract or subtitle for the new collection)</small></label>
                <input id="subtitle" type="text" class="form-control" name="subtitle"
                       #subtitle="ngModel" [(ngModel)]="newgroup.subtitle"
                       required />
                <div *ngIf="f.submitted && !subtitle.valid" class="help-block">Abstract/subtitle is required</div>
              </div>
              <div class="form-group">
                <button [disabled]="loading" class="btn btn-info" tooltip="Create a new collection">Submit
                  <i class="fa fa-plus-circle" aria-hidden="true"></i></button>
                <img *ngIf="loading"
                     src="data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA=="/>
              </div>
            </form>

          </div>
        </div>
      </div>
    </div>
  </div>
</div>
