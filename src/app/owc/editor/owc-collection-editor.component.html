<div class="panel panel-default">
  <div class="panel-heading">
    <a (click)="closeEditor()" tooltip="Closing editor and return (no save)">
      <i class="fa fa-backward" aria-hidden="true"></i></a> || Collections editor (use with caution)
  </div>
  <div class="panel-body" *ngIf="owcForm">

    <form [formGroup]="owcForm" novalidate (ngSubmit)="saveEdits()" class="form-horizontal">

      <div class="list-group">

        <h2>Collection detailed properties</h2>
        <div class="form-group list-group-item">
          <label class="col-sm-1 control-label">Type:</label>
          <div class="col-sm-10">
            <!-- <input class="form-control" type="text" formControlName="type"> -->
            <small>{{ owcForm['controls'].type.value }}</small>
          </div>
        </div>

        <div class="form-group list-group-item">
          <label class="col-sm-1 control-label">Collection Identifier:</label>
          <div class="col-sm-10">
            <!-- <input class="form-control" type="text" formControlName="id" id="id"> -->
            <!--display error message if not valid-->
            <small>{{ owcForm['controls'].id.value }}</small>
          </div>
        </div>

        <div *ngIf="owcForm['controls'].bbox" class="form-group list-group-item">
          <label class="col-sm-1 control-label" tooltip="should separate into 4 number fields">bbox:</label>
          <div class="col-sm-10">
            <input class="form-control" type="text" formControlName="bbox">
          </div>
        </div>

        <div formGroupName="properties" class="list-group">

          <!--lang: string;-->
          <div class="form-group list-group-item">
            <label class="col-sm-1 control-label" tooltip=" ">language:</label>
            <div class="col-sm-10">
              <input class="form-control" type="text" formControlName="lang"></div>
          </div>

          <!--title: string;-->
          <div class="form-group list-group-item">
            <label class="col-sm-1 control-label" tooltip=" ">title:</label>
            <div class="col-sm-10">
              <input class="form-control" type="text" formControlName="title"></div>
          </div>

          <!--subtitle?: string;-->
          <div class="form-group list-group-item">
            <label class="col-sm-1 control-label" tooltip=" ">subtitle:</label>
            <div class="col-sm-10">
              <input class="form-control" type="text" formControlName="subtitle"></div>
          </div>

          <!--updated: string;-->
          <div class="form-group list-group-item">
            <label class="col-sm-1 control-label" tooltip=" ">updated:</label>
            <div class="col-sm-10">
              <input class="form-control" type="text" formControlName="updated"></div>
          </div>

          <!--publisher?: string;-->
          <div>
            <label class="col-sm-1 control-label" tooltip=" ">publisher:</label>
            <div class="col-sm-10">
              <input class="form-control" type="text" formControlName="publisher"></div>
          </div>

          <!--rights?: string;-->
          <div class="form-group list-group-item">
            <label class="col-sm-1 control-label" tooltip=" ">rights:</label>
            <div class="col-sm-10">
              <input class="form-control" type="text" formControlName="rights"></div>
          </div>
          <!--date?: string;-->
          <div class="form-group list-group-item">
            <label class="col-sm-1 control-label" tooltip="time interval of interest">date:</label>
            <div class="col-sm-10">
              <input class="form-control" type="text" formControlName="date"></div>
          </div>

          <!--generator?: OwcCreatorApplication;-->
          <div formGroupName="generator" class="form-group list-group-item">
            <small>Details about the application that created this document</small>
            <div class="list-group">
<!--              <div>
                <pre>{{ owcForm['controls'].properties['controls'].generator.value |json }}</pre>
              </div>-->
              <div class="form-group list-group-item">
                <label class="col-sm-1 control-label" tooltip=" ">title:</label>
                <div class="col-sm-10">
                  <input class="form-control" type="text" formControlName="title"></div>
              </div>
              <div class="form-group list-group-item">
                <label class="col-sm-1 control-label" tooltip=" ">uri:</label>
                <div class="col-sm-10">
                  <input class="form-control" type="text" formControlName="uri"></div>
              </div>
              <div class="form-group list-group-item">
                <label class="col-sm-1 control-label" tooltip=" ">version:</label>
                <div class="col-sm-10">
                  <input class="form-control" type="text" formControlName="version"></div>
              </div>
            </div>
          </div>

          <!--display?: OwcCreatorDisplay;-->
          <div formGroupName="display" class="form-group list-group-item">
            <small>Details about the resolution for an displaying application</small>
            <div class="list-group">
<!--              <div>
                <pre>{{ owcForm['controls'].properties['controls'].display.value |json }}</pre>
              </div>-->
              <div class="form-group list-group-item">
                <label class="col-sm-1 control-label" tooltip=" ">pixelWidth:</label>
                <div class="col-sm-10">
                  <input class="form-control" type="number" formControlName="pixelWidth"></div>
              </div>
              <div class="form-group list-group-item">
                <label class="col-sm-1 control-label" tooltip=" ">pixelHeight:</label>
                <div class="col-sm-10">
                  <input class="form-control" type="number" formControlName="pixelHeight"></div>
              </div>
              <div class="form-group list-group-item">
                <label class="col-sm-1 control-label" tooltip=" ">mmPerPixel:</label>
                <div class="col-sm-10">
                  <input class="form-control" type="number" formControlName="mmPerPixel"></div>
              </div>
            </div>
          </div>

          <!--authors?: OwcAuthor[];-->
          <h3>Authors section for collection</h3>
          <small>INFO: add short info?</small>
          <div
            *ngIf="!owcForm['controls'].properties['controls'].authors || owcForm['controls'].properties['controls'].authors.controls.length <= 0">
            <small>currently no elements here</small>
          </div>
          <div *ngIf="owcForm['controls'].properties['controls'].authors"
               class="list-group" formArrayName="authors">

            <div>
              <a (click)="addAuthorToContext()"
                 class="btn btn-sm btn-info">add additional <i class="fa fa-plus-circle"></i></a>
            </div>

            <div class="list-group-item"
                 *ngFor="let author of owcForm['controls'].properties['controls'].authors.controls; index as i; trackBy: trackByFn" [formGroupName]="i">

              <div>
                <a class="btn btn-sm btn-warning"
                   (click)="owcForm['controls'].properties['controls'].authors.removeAt(i)">No#
                  {{i + 1}} ( remove <i class="fa fa-minus-circle"></i> )</a>
              </div>

                <div class="form-group">
                  <label class="col-sm-1 control-label">name:</label>
                  <div class="col-sm-10">
                    <input class="form-control" type="text" formControlName="name"></div>
                </div>
                <div class="form-group">
                  <label class="col-sm-1 control-label">email:</label>
                  <div class="col-sm-10">
                    <input class="form-control" type="email" formControlName="email"></div>
                </div>
                <div class="form-group">
                  <label class="col-sm-1 control-label">uri:</label>
                  <div class="col-sm-10">
                    <input class="form-control" type="text" formControlName="uri"></div>
                </div>
            </div>
          </div>

          <!--categories?: OwcCategory[];-->
          <h3>Category / Keyword section for collection</h3>
          <small>INFO: add short info?</small>

          <div
            *ngIf="!owcForm['controls'].properties['controls'].categories || owcForm['controls'].properties['controls'].categories.controls.length <= 0">
            <small>currently no elements here</small>
          </div>
          <div *ngIf="owcForm['controls'].properties['controls'].categories"
               class="list-group" formArrayName="categories">

            <div>
              <a (click)="addCategoryToContext()"
                 class="btn btn-sm btn-info">add additional <i class="fa fa-plus-circle"></i></a>
            </div>

            <div class="list-group-item"
                 *ngFor="let category of owcForm['controls'].properties['controls'].categories.controls; let i=index">

              <div>
                <a class="btn btn-sm btn-warning"
                   (click)="owcForm['controls'].properties['controls'].categories.removeAt(i)">No# {{i + 1}} ( remove <i
                  class="fa fa-minus-circle"></i> )</a>
              </div>

              <div [formGroupName]="i">

                <div class="form-group">
                  <label class="col-sm-1 control-label">term:</label>
                  <div class="col-sm-10">
                    <input class="form-control" type="text" formControlName="term"></div>
                </div>
                <div class="form-group">
                  <label class="col-sm-1 control-label">scheme:</label>
                  <div class="col-sm-10">
                    <input class="form-control" type="text" formControlName="scheme"></div>
                </div>
                <div class="form-group">
                  <label class="col-sm-1 control-label">label:</label>
                  <div class="col-sm-10">
                    <input class="form-control" type="text" formControlName="label"></div>
                </div>
              </div>
            </div>
          </div>

          <!-- LINKS section for OwcContext-->
          <div formGroupName="links" class="list-group">
            <!-- links: OwcContextLinks; -->
            <h3>OWC Profiles Links section for collection</h3>
            <small>TODO: warning to not change this unless you know what you do</small>

            <div
              *ngIf="!owcForm['controls'].properties['controls'].links['controls'].profiles || owcForm['controls'].properties['controls'].links['controls'].profiles.controls.length <= 0">
              <small>currently no elements here</small>
            </div>
            <div *ngIf="owcForm['controls'].properties['controls'].links['controls'].profiles"
                 class="list-group" formArrayName="profiles">

              <div>
                <a (click)="addLinkToContext('profile', 'profiles')"
                   class="btn btn-sm btn-info">add additional <i class="fa fa-plus-circle"></i></a>
              </div>

              <div class="list-group-item"
                   *ngFor="let link of owcForm['controls'].properties['controls'].links['controls'].profiles.controls; let i=index">

                <div>
                  <!-- <pre>{{{ link.value |json }}</pre> -->
                  <a class="btn btn-sm btn-warning"
                     (click)="owcForm['controls'].properties['controls'].links['controls'].profiles.removeAt(i)">No# {{i + 1}} (
                    remove <i class="fa fa-minus-circle"></i> )</a>
                </div>

                <div [formGroupName]="i">

                  <div class="form-group">
                    <label class="col-sm-1 control-label">href:</label>
                    <div class="col-sm-10">
                      <input class="form-control" type="text" formControlName="href"></div>
                  </div>

                  <div class="form-group">
                    <label class="col-sm-1 control-label">type:</label>
                    <div class="col-sm-10">
                      <input class="form-control" type="text" formControlName="type"></div>
                  </div>

                  <div class="form-group">
                    <label class="col-sm-1 control-label">lang:</label>
                    <div class="col-sm-10">
                      <input class="form-control" type="text" formControlName="lang"></div>
                  </div>

                  <div class="form-group">
                    <label class="col-sm-1 control-label">title:</label>
                    <div class="col-sm-10">
                      <input class="form-control" type="text" formControlName="title"></div>
                  </div>

                  <div class="form-group">
                    <label class="col-sm-1 control-label">length:</label>
                    <div class="col-sm-10">
                      <input class="form-control" type="number" formControlName="length"></div>
                  </div>

                  <div class="form-group">
                    <label class="col-sm-1 control-label">rel:</label>
                    <div class="col-sm-10">
                      <input class="form-control" type="text" formControlName="rel"></div>
                  </div>
                </div>
              </div>
            </div>

            <h3>Via Links metadata section for collection</h3>
            <small>INFO: add short info?</small>

            <div
              *ngIf="!owcForm['controls'].properties['controls'].links['controls'].via || owcForm['controls'].properties['controls'].links['controls'].via.controls.length <= 0">
              <small>currently no elements here</small>
            </div>
            <div *ngIf="owcForm['controls'].properties['controls'].links['controls'].via"
                 class="list-group" formArrayName="via">

              <div>
                <a (click)="addLinkToContext('via', 'via')"
                   class="btn btn-sm btn-info">add additional <i class="fa fa-plus-circle"></i></a>
              </div>

              <div class="list-group-item"
                   *ngFor="let link of owcForm['controls'].properties['controls'].links['controls'].via.controls; let i=index">

                <div>
                  <a class="btn btn-sm btn-warning"
                     (click)="owcForm['controls'].properties['controls'].links['controls'].via.removeAt(i)">No# {{i + 1}} ( remove <i
                    class="fa fa-minus-circle"></i> )</a>
                </div>

                <div [formGroupName]="i">

                  <div class="form-group">
                    <label class="col-sm-1 control-label">href:</label>
                    <div class="col-sm-10">
                      <input class="form-control" type="text" formControlName="href"></div>
                  </div>
                  <div class="form-group">
                    <label class="col-sm-1 control-label">type:</label>
                    <div class="col-sm-10">
                      <input class="form-control" type="text" formControlName="type"></div>
                  </div>
                  <div class="form-group">
                    <label class="col-sm-1 control-label">lang:</label>
                    <div class="col-sm-10">
                      <input class="form-control" type="text" formControlName="lang"></div>
                  </div>
                  <div class="form-group">
                    <label class="col-sm-1 control-label">title:</label>
                    <div class="col-sm-10">
                      <input class="form-control" type="text" formControlName="title"></div>
                  </div>
                  <div class="form-group">
                    <label class="col-sm-1 control-label">length:</label>
                    <div class="col-sm-10">
                      <input class="form-control" type="number" formControlName="length"></div>
                  </div>
                  <div class="form-group">
                    <label class="col-sm-1 control-label">rel:</label>
                    <div class="col-sm-10">
                      <input class="form-control" type="text" formControlName="rel"></div>
                  </div>
                </div>
              </div>
            </div>

          </div>
        </div>
      </div>

      <h3>Features ( aka Entries / Resources)</h3>
      <small>INFO: Resources/features cannot be created by hand,
        but only through file uploads or metadata records creation.
        They can then be edited through the collection editor (i.e. here).
        Features should also only be deleted in the colelctions view (editor closed).
      </small>

      <div *ngIf="owcForm['controls'].features" class="list-group" formArrayName="features">

        <tabset>

          <tab heading="{{ i }}" *ngFor="let feature of owcForm['controls'].features.controls; let i=index">

            <div class="list-group">
              <!-- <pre>{{ feature.value |json }}</pre> -->

              <!-- Angular assigns array index as group name by default 0, 1, 2, ... -->
              <div [formGroupName]="i">

                <div class="form-group list-group-item">
                  <label class="col-sm-1 control-label">Type:</label>
                  <div class="col-sm-10">
                    <!-- <div class="col-sm-10"><input class="form-control" type="text" formControlName="type"> -->
                    <small>{{ owcForm['controls'].features.controls[i]['controls'].type.value }}</small>
                  </div>
                </div>

                <div class="form-group list-group-item">
                  <label class="col-sm-1 control-label">Feature Identifier:</label>
                  <div class="col-sm-10">
                    <!-- <div class="col-sm-10"><input class="form-control" type="text" formControlName="id" id="id"> -->
                    <!--display error message if not valid-->
                    <small>{{ owcForm['controls'].features.controls[i]['controls'].id.value }}</small>
                  </div>
                </div>

                <div *ngIf="owcForm['controls'].features.controls[i]['controls'].geometry"
                     class="form-group list-group-item">
                  <label class="col-sm-1 control-label">geometry:</label>
                  <div class="col-sm-10">
                    <input class="form-control" type="text" formControlName="geometry"></div>
                </div>

                <div formGroupName="properties" class="list-group">

                  <!--title: string;-->
                  <div class="form-group list-group-item">
                    <label class="col-sm-1 control-label" tooltip=" ">title:</label>
                    <div class="col-sm-10">
                      <input class="form-control" type="text" formControlName="title"></div>
                  </div>

                  <!--abstract?: string;-->
                  <div class="form-group list-group-item">
                    <label class="col-sm-1 control-label" tooltip=" ">abstract:</label>
                    <div class="col-sm-10">
                      <input class="form-control" type="text" formControlName="abstract"></div>
                  </div>
                  <!--updated: string;-->
                  <div class="form-group list-group-item">
                    <label class="col-sm-1 control-label" tooltip=" ">updated:</label>
                    <div class="col-sm-10">
                      <input class="form-control" type="text" formControlName="updated"></div>
                  </div>

                  <!--publisher?: string;-->
                  <div class="form-group list-group-item">
                    <label class="col-sm-1 control-label" tooltip=" ">publisher:</label>
                    <div class="col-sm-10">
                      <input class="form-control" type="text" formControlName="publisher"></div>
                  </div>

                  <!--rights?: string;-->
                  <div class="form-group list-group-item">
                    <label class="col-sm-1 control-label" tooltip=" ">rights:</label>
                    <div class="col-sm-10">
                      <input class="form-control" type="text" formControlName="rights"></div>
                  </div>
                  <!--date?: string;-->
                  <div class="form-group list-group-item">
                    <label class="col-sm-1 control-label" tooltip="time interval of interest">date:</label>
                    <div class="col-sm-10">
                      <input class="form-control" type="text" formControlName="date"></div>
                  </div>

                  <!--active?: boolean;-->
                  <div class="form-group list-group-item">
                    <label class="col-sm-1 control-label" tooltip=" ">active:</label>
                    <div class="col-sm-10">
                      <input class="form-control" type="text" formControlName="active"></div>
                  </div>
                  <!--minscaledenominator?: number;-->
                  <div class="form-group list-group-item">
                    <label class="col-sm-1 control-label" tooltip=" ">minscale denominator:</label>
                    <div class="col-sm-10">
                      <input class="form-control" type="number"
                             formControlName="minscaledenominator"></div>
                  </div>
                  <!--maxscaledenominator?: number;-->
                  <div class="form-group list-group-item">
                    <label class="col-sm-1 control-label" tooltip=" ">maxscale denominator:</label>
                    <div class="col-sm-10">
                      <input class="form-control" type="number"
                             formControlName="maxscaledenominator"></div>
                  </div>
                  <!--folder?: string;-->
                  <div class="form-group list-group-item">
                    <label class="col-sm-1 control-label" tooltip=" ">folder:</label>
                    <div class="col-sm-10">
                      <input class="form-control" type="text" formControlName="folder"></div>
                  </div>

                  <!--authors?: OwcAuthor[];-->
                  <h3>Authors section for this feature</h3>
                  <small>INFO: add short info?</small>

                  <div
                    *ngIf="!owcForm['controls'].features.controls[i]['controls'].properties['controls'].authors || owcForm['controls'].features.controls[i]['controls'].properties['controls'].authors.controls.length <= 0">
                    <small>currently no elements here</small>
                  </div>
                  <div *ngIf="owcForm['controls'].features.controls[i]['controls'].properties['controls'].authors"
                       class="list-group" formArrayName="authors">

                    <div>
                      <a
                        (click)="addAuthorToFeature(i)"
                        class="btn btn-sm btn-info">add additional <i class="fa fa-plus-circle"></i></a>
                    </div>

                    <div class="list-group-item"
                         *ngFor="let author of owcForm['controls'].features.controls[i]['controls'].properties['controls'].authors.controls; let j=index">

                      <div>
                        <a class="btn btn-sm btn-warning"
                        (click)="owcForm['controls'].features.controls[i]['controls'].properties['controls'].authors.removeAt(j)">No# {{j + 1}} ( remove <i class="fa fa-minus-circle"></i>
                          )</a>
                      </div>

                      <div [formGroupName]="j">

                        <div class="form-group">
                          <label class="col-sm-1 control-label">name:</label>
                          <div class="col-sm-10">
                            <input class="form-control" type="text" formControlName="name"></div>
                        </div>
                        <div class="form-group">
                          <label class="col-sm-1 control-label">email:</label>
                          <div class="col-sm-10">
                            <input type="email" formControlName="email">
                          </div>
                        </div>
                        <div class="form-group">
                          <label class="col-sm-1 control-label">uri:</label>
                          <div class="col-sm-10">
                            <input class="form-control" type="text" formControlName="uri"></div>
                        </div>
                      </div>
                    </div>
                  </div>

                  <!--categories?: OwcCategory[];-->
                  <h3>Category / Keyword section for this feature)</h3>
                  <small>INFO: add short info?</small>

                  <div
                    *ngIf="!owcForm['controls'].features.controls[i]['controls'].properties['controls'].categories || owcForm['controls'].features.controls[i]['controls'].properties['controls'].categories.controls.length <= 0">
                    <small>currently no elements here</small>
                  </div>
                  <div *ngIf="owcForm['controls'].features.controls[i]['controls'].properties['controls'].categories"
                       class="list-group" formArrayName="categories">

                    <div>
                      <a
                        (click)="addCategoryToFeature(i)"
                        class="btn btn-sm btn-info">add additional <i class="fa fa-plus-circle"></i></a>
                    </div>

                    <div class="list-group-item"
                         *ngFor="let category of owcForm['controls'].features.controls[i]['controls'].properties['controls'].categories.controls; let j=index">

                      <div>
                        <a class="btn btn-sm btn-warning"
                        (click)="owcForm['controls'].features.controls[i]['controls'].properties['controls'].categories.removeAt(j)">No# {{j + 1}} ( remove <i class="fa fa-minus-circle"></i>
                          )</a>
                      </div>

                      <div [formGroupName]="j">

                        <div class="form-group">
                          <label class="col-sm-1 control-label">term:</label>
                          <div class="col-sm-10">
                            <input class="form-control" type="text" formControlName="term"></div>
                        </div>
                        <div class="form-group">
                          <label class="col-sm-1 control-label">scheme:</label>
                          <div class="col-sm-10">
                            <input class="form-control" type="text" formControlName="scheme"></div>
                        </div>
                        <div class="form-group">
                          <label class="col-sm-1 control-label">label:</label>
                          <div class="col-sm-10">
                            <input class="form-control" type="text" formControlName="label"></div>
                        </div>
                      </div>
                    </div>
                  </div>

                  <!--links?: OwcResourceLinks;-->
                  <div formGroupName="links" class="list-group">

                    <!--alternates?: OwcLink[];-->
                    <h3>Alternate links section for this feature</h3>
                    <small>INFO: add short info?</small>

                    <div
                      *ngIf="!owcForm['controls'].features.controls[i]['controls'].properties['controls'].links['controls'].alternates || owcForm['controls'].features.controls[i]['controls'].properties['controls'].links['controls'].alternates.controls.length <= 0">
                      <small>currently no elements here</small>
                    </div>
                    <div
                      *ngIf="owcForm['controls'].features.controls[i]['controls'].properties['controls'].links['controls'].alternates"
                      class="list-group" formArrayName="alternates">

                      <div>
                        <a (click)="addLinkToFeature(i, 'alternate', 'alternates')"
                           class="btn btn-sm btn-info">add additional <i class="fa fa-plus-circle"></i></a>
                      </div>

                      <div class="list-group-item"
                           *ngFor="let link of owcForm['controls'].features.controls[i]['controls'].properties['controls'].links['controls'].alternates.controls; let j=index">

                        <div>
                          <a class="btn btn-sm btn-warning"
                          (click)="owcForm['controls'].features.controls[i]['controls'].properties['controls'].links['controls'].alternates.removeAt(j)">No# {{j + 1}} ( remove <i class="fa fa-minus-circle"></i>
                            )</a>
                        </div>

                        <div [formGroupName]="j">

                          <div class="form-group">
                            <label class="col-sm-1 control-label">href:</label>
                            <div class="col-sm-10">
                              <input class="form-control" type="text" formControlName="href"></div>
                          </div>
                          <div class="form-group">
                            <label class="col-sm-1 control-label">type:</label>
                            <div class="col-sm-10">
                              <input class="form-control" type="text" formControlName="type"></div>
                          </div>
                          <div class="form-group">
                            <label class="col-sm-1 control-label">lang:</label>
                            <div class="col-sm-10">
                              <input class="form-control" type="text" formControlName="lang"></div>
                          </div>
                          <div class="form-group">
                            <label class="col-sm-1 control-label">title:</label>
                            <div class="col-sm-10">
                              <input class="form-control" type="text" formControlName="title"></div>
                          </div>
                          <div class="form-group">
                            <label class="col-sm-1 control-label">length:</label>
                            <div class="col-sm-10">
                              <input class="form-control" type="number" formControlName="length"></div>
                          </div>
                          <div class="form-group">
                            <label class="col-sm-1 control-label">rel:</label>
                            <div class="col-sm-10">
                              <input class="form-control" type="text" formControlName="rel"></div>
                          </div>
                        </div>
                      </div>
                    </div>

                    <!--links?: OwcResourceLinks;-->
                    <!--previews?: OwcLink[];-->
                    <h3>Preview Links / Icons section for this feature</h3>
                    <small>INFO: add short info?</small>

                    <div
                      *ngIf="!owcForm['controls'].features.controls[i]['controls'].properties['controls'].links['controls'].previews || owcForm['controls'].features.controls[i]['controls'].properties['controls'].links['controls'].previews.controls.length <= 0">
                      <small>currently no elements here</small>
                    </div>
                    <div
                      *ngIf="owcForm['controls'].features.controls[i]['controls'].properties['controls'].links['controls'].previews"
                      class="list-group" formArrayName="previews">

                      <div>
                        <a (click)="addLinkToFeature(i, 'icon', 'previews')"
                           class="btn btn-sm btn-info">add additional <i class="fa fa-plus-circle"></i></a>
                      </div>

                      <div class="list-group-item"
                           *ngFor="let link of owcForm['controls'].features.controls[i]['controls'].properties['controls'].links['controls'].previews.controls; let j=index">

                        <div>
                          <a class="btn btn-sm btn-warning"
                             (click)="owcForm['controls'].features.controls[i]['controls'].properties['controls'].links['controls'].previews.removeAt(j)">No# {{j + 1}} ( remove <i class="fa fa-minus-circle"></i>
                            )</a>
                        </div>

                        <div [formGroupName]="j">

                          <div class="form-group">
                            <label class="col-sm-1 control-label">href:</label>
                            <div class="col-sm-10">
                              <input class="form-control" type="text" formControlName="href"></div>
                          </div>
                          <div class="form-group">
                            <label class="col-sm-1 control-label">type:</label>
                            <div class="col-sm-10">
                              <input class="form-control" type="text" formControlName="type"></div>
                          </div>
                          <div class="form-group">
                            <label class="col-sm-1 control-label">lang:</label>
                            <div class="col-sm-10">
                              <input class="form-control" type="text" formControlName="lang"></div>
                          </div>
                          <div class="form-group">
                            <label class="col-sm-1 control-label">title:</label>
                            <div class="col-sm-10">
                              <input class="form-control" type="text" formControlName="title"></div>
                          </div>
                          <div class="form-group">
                            <label class="col-sm-1 control-label">length:</label>
                            <div class="col-sm-10">
                              <input class="form-control" type="number" formControlName="length"></div>
                          </div>
                          <div class="form-group">
                            <label class="col-sm-1 control-label">rel:</label>
                            <div class="col-sm-10">
                              <input class="form-control" type="text" formControlName="rel"></div>
                          </div>
                        </div>
                      </div>
                    </div>

                    <!--links?: OwcResourceLinks;-->
                    <!--data?: OwcLink[];-->
                    <h3>Links to data files section for this feature</h3>
                    <small>INFO: add short info?</small>

                    <div
                      *ngIf="!owcForm['controls'].features.controls[i]['controls'].properties['controls'].links['controls'].data || owcForm['controls'].features.controls[i]['controls'].properties['controls'].links['controls'].data.controls.length <= 0">
                      <small>currently no elements here</small>
                    </div>
                    <div *ngIf="owcForm['controls'].features.controls[i]['controls'].properties['controls'].links['controls'].data"
                         class="list-group" formArrayName="data">

                      <div>
                        <a (click)="addLinkToFeature(i, 'enclosure', 'data')"
                           class="btn btn-sm btn-info">add additional <i class="fa fa-plus-circle"></i></a>
                      </div>

                      <div class="list-group-item"
                           *ngFor="let link of owcForm['controls'].features.controls[i]['controls'].properties['controls'].links['controls'].data.controls; let j=index">

                        <div>
                          <a class="btn btn-sm btn-warning"
                             (click)="owcForm['controls'].features.controls[i]['controls'].properties['controls'].links['controls'].data.removeAt(j)">No# {{j + 1}} ( remove <i class="fa fa-minus-circle"></i>
                            )</a>
                        </div>

                        <div [formGroupName]="j">

                          <div class="form-group">
                            <label class="col-sm-1 control-label">href:</label>
                            <div class="col-sm-10">
                              <input class="form-control" type="text" formControlName="href"></div>
                          </div>
                          <div class="form-group">
                            <label class="col-sm-1 control-label">type:</label>
                            <div class="col-sm-10">
                              <input class="form-control" type="text" formControlName="type"></div>
                          </div>
                          <div class="form-group">
                            <label class="col-sm-1 control-label">lang:</label>
                            <div class="col-sm-10">
                              <input class="form-control" type="text" formControlName="lang"></div>
                          </div>
                          <div class="form-group">
                            <label class="col-sm-1 control-label">title:</label>
                            <div class="col-sm-10">
                              <input class="form-control" type="text" formControlName="title"></div>
                          </div>
                          <div class="form-group">
                            <label class="col-sm-1 control-label">length:</label>
                            <div class="col-sm-10">
                              <input class="form-control" type="number" formControlName="length"></div>
                          </div>
                          <div class="form-group">
                            <label class="col-sm-1 control-label">rel:</label>
                            <div class="col-sm-10">
                              <input class="form-control" type="text" formControlName="rel"></div>
                          </div>
                        </div>
                      </div>
                    </div>

                    <!--links?: OwcResourceLinks;-->
                    <!--via?: OwcLink[];-->
                    <h3>Via links, resource metadata section for this feature</h3>
                    <small>INFO: add short info?</small>

                    <div
                      *ngIf="!owcForm['controls'].features.controls[i]['controls'].properties['controls'].links['controls'].via || owcForm['controls'].features.controls[i]['controls'].properties['controls'].links['controls'].via.controls.length <= 0">
                      <small>currently no elements here</small>
                    </div>
                    <div *ngIf="owcForm['controls'].features.controls[i]['controls'].properties['controls'].links['controls'].via"
                         class="list-group" formArrayName="via">

                      <div>
                        <a (click)="addLinkToFeature(i, 'via', 'via')"
                           class="btn btn-sm btn-info">add additional <i class="fa fa-plus-circle"></i></a>
                      </div>

                      <div class="list-group-item"
                           *ngFor="let link of owcForm['controls'].features.controls[i]['controls'].properties['controls'].links['controls'].via.controls; let j=index">

                        <div>
                          <a class="btn btn-sm btn-warning"
                             (click)="owcForm['controls'].features.controls[i]['controls'].properties['controls'].links['controls'].via.removeAt(j)">No# {{j + 1}} ( remove <i class="fa fa-minus-circle"></i>
                            )</a>
                        </div>

                        <div [formGroupName]="j">

                          <div class="form-group">
                            <label class="col-sm-1 control-label">href:</label>
                            <div class="col-sm-10">
                              <input class="form-control" type="text" formControlName="href"></div>
                          </div>
                          <div class="form-group">
                            <label class="col-sm-1 control-label">type:</label>
                            <div class="col-sm-10">
                              <input class="form-control" type="text" formControlName="type"></div>
                          </div>
                          <div class="form-group">
                            <label class="col-sm-1 control-label">lang:</label>
                            <div class="col-sm-10">
                              <input class="form-control" type="text" formControlName="lang"></div>
                          </div>
                          <div class="form-group">
                            <label class="col-sm-1 control-label">title:</label>
                            <div class="col-sm-10">
                              <input class="form-control" type="text" formControlName="title"></div>
                          </div>
                          <div class="form-group">
                            <label class="col-sm-1 control-label">length:</label>
                            <div class="col-sm-10">
                              <input class="form-control" type="number" formControlName="length"></div>
                          </div>
                          <div class="form-group">
                            <label class="col-sm-1 control-label">rel:</label>
                            <div class="col-sm-10">
                              <input class="form-control" type="text" formControlName="rel"></div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>

                  <!--offerings?: OwcOffering[];-->
                  <h3>Offerings section for this feature (OGC standards data access)</h3>
                  <small>INFO: add short info?</small>
                  <div
                    *ngIf="!owcForm['controls'].features.controls[i]['controls'].properties['controls'].offerings || owcForm['controls'].features.controls[i]['controls'].properties['controls'].offerings.controls.length <= 0">
                    <small>currently no elements here</small>
                  </div>

                  <div *ngIf="owcForm['controls'].features.controls[i]['controls'].properties['controls'].offerings"
                       class="list-group" formArrayName="offerings">

                    <div>
                      <a
                        (click)="addOfferingToFeature(i)"
                        class="btn btn-sm btn-info">add additional <i class="fa fa-plus-circle"></i></a>
                    </div>

                    <div class="list-group-item"
                         *ngFor="let offering of owcForm['controls'].features.controls[i]['controls'].properties['controls'].offerings.controls; let j=index">

                      <div>
                        <!--<pre>{{ offering.value | json }}</pre>-->
                        <a class="btn btn-sm btn-warning"
                        (click)="owcForm['controls'].features.controls[i]['controls'].properties['controls'].offerings.removeAt(j)">No# {{j + 1}} ( remove <i class="fa fa-minus-circle"></i> )</a>
                      </div>

                      <div [formGroupName]="j" class="list-group">

                        <div class="form-group list-group-item">
                          <label class="col-sm-1 control-label">code:</label>
                          <div class="col-sm-10">
                            <input class="form-control" type="text" formControlName="code"></div>
                        </div>

                        <!-- OPERATIONS -->
                        <div class="list-group-item">
                          <h4>Operations section for offering# {{j + 1}}</h4>
                          <small>INFO: add short info?</small>

                          <div
                            *ngIf="!owcForm['controls'].features.controls[i]['controls'].properties['controls'].offerings.controls[j]['controls'].operations || owcForm['controls'].features.controls[i]['controls'].properties['controls'].offerings.controls[j]['controls'].operations.controls.length <= 0">
                            <small>currently no elements here</small>
                          </div>
                          <div>
                            <a
                              (click)="addOperationToOffering(i, j)"
                              class="btn btn-sm btn-info">add additional <i class="fa fa-plus-circle"></i></a>
                          </div>

                          <div *ngIf="owcForm['controls'].features.controls[i]['controls'].properties['controls'].offerings.controls[j]['controls'].operations"
                               class="list-group" formArrayName="operations">
                            <div class="list-group-item"
                                 *ngFor="let operation of owcForm['controls'].features.controls[i]['controls'].properties['controls'].offerings.controls[j]['controls'].operations.controls; let k=index">

                              <div>
                                <!--<pre>{{ operation.value | json }}</pre>-->
                                <a class="btn btn-sm btn-warning"
                                   (click)="owcForm['controls'].features.controls[i]['controls'].properties['controls'].offerings.controls[j]['controls'].operations.removeAt(k)">No# {{k + 1}} ( remove <i class="fa fa-minus-circle"></i> )</a>
                              </div>

                              <div [formGroupName]="k">

                                <!--code: string;-->
                                <div class="form-group">
                                  <label class="col-sm-1 control-label">code:</label>
                                  <div class="col-sm-10">
                                    <input class="form-control" type="text" formControlName="code">
                                  </div>
                                </div>

                                <!--method: string;-->
                                <div class="form-group">
                                  <label class="col-sm-1 control-label">method:</label>
                                  <div class="col-sm-10">
                                    <input class="form-control" type="text" formControlName="method">
                                  </div>
                                </div>

                                <!--type?: string;-->
                                <div class="form-group">
                                  <label class="col-sm-1 control-label">type:</label>
                                  <div class="col-sm-10">
                                    <input class="form-control" type="text" formControlName="type">
                                  </div>
                                </div>

                                <!--href: string;-->
                                <div class="form-group">
                                  <label class="col-sm-1 control-label">href:</label>
                                  <div class="col-sm-10">
                                    <input class="form-control" type="text" formControlName="href">
                                  </div>
                                </div>

                                <!--request?: OwcContent;-->
                                <div formGroupName="request" class="form-group list-group-item">
                                  <small>REQUEST section for operation# {{k + 1}} / Offering# {{j + 1}}: Details about an included POST request (if any)</small>
                                  <div class="list-group">

                                    <div class="form-group">
                                      <label class="col-sm-1 control-label">type:</label>
                                      <div class="col-sm-10">
                                        <input class="form-control" type="text" formControlName="type">
                                      </div>
                                    </div>

                                    <!--href: string;-->
                                    <div class="form-group">
                                      <label class="col-sm-1 control-label">href:</label>
                                      <div class="col-sm-10">
                                        <input class="form-control" type="text" formControlName="href">
                                      </div>
                                    </div>

                                    <!--title?: string;-->
                                    <div class="form-group">
                                      <label class="col-sm-1 control-label">title:</label>
                                      <div class="col-sm-10">
                                        <input class="form-control" type="text" formControlName="title">
                                      </div>
                                    </div>

                                    <!--content: string;-->
                                    <div class="form-group">
                                      <label class="col-sm-1 control-label">data content:</label>
                                      <div class="col-sm-10">
                                        <input class="form-control" type="text" formControlName="content">
                                      </div>
                                    </div>

                                  </div>
                                </div>

                                <!--result?: OwcContent;-->
                                <div formGroupName="result" class="form-group list-group-item">
                                  <small>RESULT section for operation# {{k + 1}} / Offering# {{j + 1}}: Details about the received and stored result of a request (if any)</small>
                                  <div class="list-group">

                                    <div class="form-group">
                                      <label class="col-sm-1 control-label">type:</label>
                                      <div class="col-sm-10">
                                        <input class="form-control" type="text" formControlName="type">
                                      </div>
                                    </div>

                                    <!--href: string;-->
                                    <div class="form-group">
                                      <label class="col-sm-1 control-label">href:</label>
                                      <div class="col-sm-10">
                                        <input class="form-control" type="text" formControlName="href">
                                      </div>
                                    </div>

                                    <!--title?: string;-->
                                    <div class="form-group">
                                      <label class="col-sm-1 control-label">title:</label>
                                      <div class="col-sm-10">
                                        <input class="form-control" type="text" formControlName="title">
                                      </div>
                                    </div>

                                    <!--content: string;-->
                                    <div class="form-group">
                                      <label class="col-sm-1 control-label">data content:</label>
                                      <div class="col-sm-10">
                                        <input class="form-control" type="text" formControlName="content">
                                      </div>
                                    </div>

                                  </div>
                                </div>

                                <!--uuid?: string;-->


                              </div>
                            </div>
                          </div>
                        </div>

                        <!-- STYLESETS -->
                        <div class="list-group-item">
                          <h4>StyleSets section for offering# {{j + 1}}</h4>
                          <small>INFO: add short info?</small>

                          <div
                            *ngIf="!owcForm['controls'].features.controls[i]['controls'].properties['controls'].offerings.controls[j]['controls'].styles || owcForm['controls'].features.controls[i]['controls'].properties['controls'].offerings.controls[j]['controls'].styles.controls.length <= 0">
                            <small>currently no elements here</small>
                          </div>
                          <div>
                            <a
                              (click)="addStyleToOffering(i, j)"
                              class="btn btn-sm btn-info">add additional <i class="fa fa-plus-circle"></i></a>
                          </div>

                          <div *ngIf="owcForm['controls'].features.controls[i]['controls'].properties['controls'].offerings.controls[j]['controls'].styles"
                               class="list-group" formArrayName="styles">
                            <div class="list-group-item"
                                 *ngFor="let styleset of owcForm['controls'].features.controls[i]['controls'].properties['controls'].offerings.controls[j]['controls'].styles.controls; let k=index">

                              <div>
                                <!--<pre>{{ styleset.value | json }}</pre>-->
                                <a class="btn btn-sm btn-warning"
                                   (click)="owcForm['controls'].features.controls[i]['controls'].properties['controls'].offerings.controls[j]['controls'].styles.removeAt(k)">No# {{k + 1}} ( remove <i class="fa fa-minus-circle"></i> )</a>
                              </div>

                              <div [formGroupName]="k">

                                <!--name: string;-->
                                <div class="form-group">
                                  <label class="col-sm-1 control-label">name:</label>
                                  <div class="col-sm-10">
                                    <input class="form-control" type="text" formControlName="name">
                                  </div>
                                </div>

                                <!--title: string;-->
                                <div class="form-group">
                                  <label class="col-sm-1 control-label">title:</label>
                                  <div class="col-sm-10">
                                    <input class="form-control" type="text" formControlName="title">
                                  </div>
                                </div>

                                <!--abstract?: string;-->
                                <div class="form-group">
                                  <label class="col-sm-1 control-label">abstract:</label>
                                  <div class="col-sm-10">
                                    <input class="form-control" type="text" formControlName="abstract">
                                  </div>
                                </div>

                                <!--default?: boolean;-->
                                <div class="form-group">
                                  <label class="col-sm-1 control-label">default:</label>
                                  <div class="col-sm-10">
                                    <input class="form-control" type="text" formControlName="default">
                                  </div>
                                </div>

                                <!--legendURL?: string;-->
                                <div class="form-group">
                                  <label class="col-sm-1 control-label">legendURL:</label>
                                  <div class="col-sm-10">
                                    <input class="form-control" type="text" formControlName="legendURL">
                                  </div>
                                </div>

                                <!--content?: OwcContent;-->
                                <div formGroupName="content" class="form-group list-group-item">
                                  <small>STYLE data section for style# {{k + 1}} / Offering# {{j + 1}}: Details about an included/stored style descriptor (if any)</small>
                                  <div class="list-group">

                                    <div class="form-group">
                                      <label class="col-sm-1 control-label">type:</label>
                                      <div class="col-sm-10">
                                        <input class="form-control" type="text" formControlName="type">
                                      </div>
                                    </div>

                                    <!--href: string;-->
                                    <div class="form-group">
                                      <label class="col-sm-1 control-label">href:</label>
                                      <div class="col-sm-10">
                                        <input class="form-control" type="text" formControlName="href">
                                      </div>
                                    </div>

                                    <!--title?: string;-->
                                    <div class="form-group">
                                      <label class="col-sm-1 control-label">title:</label>
                                      <div class="col-sm-10">
                                        <input class="form-control" type="text" formControlName="title">
                                      </div>
                                    </div>

                                    <!--content: string;-->
                                    <div class="form-group">
                                      <label class="col-sm-1 control-label">data content:</label>
                                      <div class="col-sm-10">
                                        <input class="form-control" type="text" formControlName="content">
                                      </div>
                                    </div>

                                  </div>
                                </div>

                                <!--uuid?: string;-->

                              </div>
                            </div>
                          </div>
                        </div>

                        <!-- CONTENTS -->
                        <div class="list-group-item">
                          <h4>Contents array section for offering# {{j + 1}}</h4>
                          <small>INFO: add short info?</small>

                          <div
                            *ngIf="!owcForm['controls'].features.controls[i]['controls'].properties['controls'].offerings.controls[j]['controls'].contents || owcForm['controls'].features.controls[i]['controls'].properties['controls'].offerings.controls[j]['controls'].contents.controls.length <= 0">
                            <small>currently no elements here</small>
                          </div>
                          <div>
                            <a
                              (click)="addContentToOffering(i, j)"
                              class="btn btn-sm btn-info">add additional <i class="fa fa-plus-circle"></i></a>
                          </div>

                          <div *ngIf="owcForm['controls'].features.controls[i]['controls'].properties['controls'].offerings.controls[j]['controls'].contents"
                               class="list-group" formArrayName="contents">
                            <div class="list-group-item"
                                 *ngFor="let content of owcForm['controls'].features.controls[i]['controls'].properties['controls'].offerings.controls[j]['controls'].contents.controls; let k=index">

                              <div>
                                <!--<pre>{{ content.value | json }}</pre>-->
                                <a class="btn btn-sm btn-warning"
                                   (click)="owcForm['controls'].features.controls[i]['controls'].properties['controls'].offerings.controls[j]['controls'].contents.removeAt(k)">No# {{k + 1}} ( remove <i class="fa fa-minus-circle"></i> )</a>
                              </div>

                              <div [formGroupName]="k">

                                <!--  type: string;
                                   href?: string;
                                   title?: string;
                                   content?: string;
                                   uuid?: string;-->

                                <div class="form-group">
                                  <label class="col-sm-1 control-label">type:</label>
                                  <div class="col-sm-10">
                                    <input class="form-control" type="text" formControlName="type">
                                  </div>
                                </div>

                                <!--href: string;-->
                                <div class="form-group">
                                  <label class="col-sm-1 control-label">href:</label>
                                  <div class="col-sm-10">
                                    <input class="form-control" type="text" formControlName="href">
                                  </div>
                                </div>

                                <!--title?: string;-->
                                <div class="form-group">
                                  <label class="col-sm-1 control-label">title:</label>
                                  <div class="col-sm-10">
                                    <input class="form-control" type="text" formControlName="title">
                                  </div>
                                </div>

                                <!--content: string;-->
                                <div class="form-group">
                                  <label class="col-sm-1 control-label">data content:</label>
                                  <div class="col-sm-10">
                                    <input class="form-control" type="text" formControlName="content">
                                  </div>
                                </div>

                              </div>
                            </div>
                          </div>
                        </div>

                      </div>
                    </div>
                  </div>

                </div>
              </div>
            </div>
          </tab>
        </tabset>
      </div>

      <div class="list-group-item">
        <button (click)="saveEdits(owcForm.value)" class="btn btn-info" tooltip="Save edits" type="submit"
                [disabled]="!owcForm.valid">
          Save <i class="fa fa-floppy-o" aria-hidden="true"></i>
        </button>
        <button (click)="saveEditsAndReturn(owcForm.value)" class="btn btn-default" tooltip="Save edits and return" type="submit"
                [disabled]="!owcForm.valid">
          Save and return <i class="fa fa-floppy-o" aria-hidden="true"></i>
        </button>
        <button (click)="closeEditor()" type="button" class="btn btn-warning" tooltip="Close editor and return (no saving)">
          Abort and return <i class="fa fa-backward" aria-hidden="true"></i>
        </button>
      </div>

      <div class="list-group-item">
        <pre>{{ owcForm.value |json }}</pre>
      </div>

    </form>

  </div>
</div>
